<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—á–µ—Ç TCO –∞–≤—Ç–æ–º–æ–±–∏–ª—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">

        <header>
            <h1>üöó –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–ª–∞–¥–µ–Ω–∏—è</h1>
            <p>–£–∑–Ω–∞–π—Ç–µ –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–ª–∞–¥–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º</p>
        </header>
        <!-- –í index.html –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∞ -->
        <button onclick="testStorage()" class="btn-secondary" style="margin: 10px 0;">
            üß™ –¢–µ—Å—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
        </button>
                <!-- –í index.html –¥–æ–±–∞–≤—å—Ç–µ -->
        <div class="card" id="my-likes-card" style="display: none;">
            <h2>‚≠ê –ú–æ–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã</h2>
            <div id="likes-list"></div>
            <button id="back-to-main" class="btn-secondary">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <button id="show-likes-btn" class="btn-secondary" style="margin-top: 10px;">
            üìã –ú–æ–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã
        </button>
        
        <main id="main-content">
            <!-- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö -->
            <div id="input-section" class="section">
                <div class="card">
                    <h2>üìù –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ</h2>
                    <p class="hint">version 1.1.31</p>
                    
                    <div class="form-group">
                        <label for="car-input">–û–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è:</label>
                        <input type="text" id="car-input" placeholder="opel astra j 2011 1.6 115hp" 
                               autocomplete="off">
                        <button type="button" id="parse-btn" class="btn-parse">üîç –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å</button>
                    </div>
                </div>

                <div class="card" id="car-details-card" style="display: none;">
                    <h2>üöô –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="brand">–ú–∞—Ä–∫–∞:</label>
                            <input type="text" id="brand" readonly>
                        </div>
                        <div class="form-group">
                            <label for="model">–ú–æ–¥–µ–ª—å:</label>
                            <input type="text" id="model" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="year">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:</label>
                        <input type="number" id="year" min="1" max="2026">
                    </div>
                    <div class="form-group">
                        <label for="engine">–î–≤–∏–≥–∞—Ç–µ–ª—å</label>
                        <input type="text" id="engine">
                    </div>
                        <div class="form-group">
                            <label for="power">–ú–æ—â–Ω–æ—Å—Ç—å (–ª.—Å.):</label>
                            <input type="number" id="hp" min="1" max="9999">
                        </div>                    
                    <div class="form-group">
                        <label for="fuel-consumption">–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ (–ª/100–∫–º):</label>
                        <input type="number" id="consumption" step="0.1" min="0" max="99">
                    </div>
                    <div class="form-group">
                        <label for="fuel-price">–¶–µ–Ω–∞ —Ç–æ–ø–ª–∏–≤–∞:</label>
                        <input type="number" id="fuel_price">
                    </div>
                    <div class="form-group">
                        <label for="km">–¢–µ–∫—É—â–∏–π –ø—Ä–æ–±–µ–≥ (–∫–º):</label>
                        <input type="number" id="km">
                    </div>
                    <div class="form-group">
                        <label for="annual_km">–ü—Ä–æ–±–µ–≥ –≤ –≥–æ–¥ (–∫–º):</label>
                        <input type="number" id="annual_km">
                    </div>
                    <div class="form-group">
                        <label for="region">–†–µ–≥–∏–æ–Ω —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏:</label>
                        <input type="text" id="region">
                    </div>
                    <div class="form-group">
                        <label for="ownership">–°—Ä–æ–∫ –≤–ª–∞–¥–µ–Ω–∏—è (–ª–µ—Ç):</label>
                        <input type="number" id="ownership">
                    </div>
                    <div class="form-group">
                        <label for="purchase-price">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ (‚ÇΩ):</label>
                        <input type="number" id="price" min="0">
                    </div>
                    <div class="form-group">
                        <label for="osago">–¶–µ–Ω–∞ –û–°–ê–ì–û:</label>
                        <input type="number" id="osago" min="0">
                    </div>
                    <div class="form-group">
                        <label for="fees">–ù–∞–ª–æ–≥:</label>
                        <input type="number" id="fees" min="0">
                    </div>
                    <div class="form-group">
                        <label for="downtrend">–°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è:</label>
                        <input type="number" id="downtrend" min="0">
                    </div>
                    <div class="form-group">
                        <label for="service">–¢–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:</label>
                        <input type="number" id="service" min="0">
                    </div>
                    <div class="form-group">
                        <label for="fixes">–†–µ–º–æ–Ω—Ç:</label>
                        <input type="number" id="fixes" min="0">
                    </div>
                    <div class="form-group">
                        <label for="kasko">–¶–µ–Ω–∞ –ö–ê–°–ö–û:</label>
                        <input type="number" id="kasko" min="0">
                    </div>
                    <div class="form-group">
                        <label for="parking-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–∞—Ä–∫–æ–≤–∫–∏ –≤ –º–µ—Å—è—Ü (‚ÇΩ):</label>
                        <input type="number" id="parking" value="0" min="0">
                    </div>
                    <button type="button" id="calculate-btn" class="btn-primary">üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å TCO</button>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞ -->
            <div id="results-section" class="section" style="display: none;">




                <div class="card" id="car-visual-card">
                    <div class="car-header">
                        <h2 id="car-title">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</h2>
                        <button class="like-btn" id="like-btn" aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                            <svg class="like-icon" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="car-image-container">
                        <img id="car-image" src="" alt="–§–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è" class="car-image">
                        <div id="car-image-placeholder" class="car-image-placeholder">
                            üöó –§–æ—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
                        </div>
                    </div>
                    
                    <div class="car-specs">
                        <div class="spec-item">
                            <span class="spec-label">–ú–∞—Ä–∫–∞:</span>
                            <span class="spec-value" id="vis-brand">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">–ú–æ–¥–µ–ª—å:</span>
                            <span class="spec-value" id="vis-model">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">–ì–æ–¥:</span>
                            <span class="spec-value" id="vis-year">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">–î–≤–∏–≥–∞—Ç–µ–ª—å:</span>
                            <span class="spec-value" id="vis-engine">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">–ú–æ—â–Ω–æ—Å—Ç—å:</span>
                            <span class="spec-value" id="vis-hp">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">–¶–µ–Ω–∞:</span>
                            <span class="spec-value" id="vis-price">-</span>
                        </div>
                    </div>
                </div>



                <div class="card">
                    <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
                    <div class="tco-results">
                        <div class="tco-item">
                            <div class="tco-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ 1 –∫–º:</div>
                            <div class="tco-value" id="cost-per-km">-</div>
                        </div>
                        <div class="tco-item">
                            <div class="tco-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ 1 –º–µ—Å—è—Ü:</div>
                            <div class="tco-value" id="cost-per-month">-</div>
                        </div>
                        <div class="tco-item highlight">
                            <div class="tco-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ 1 –≥–æ–¥:</div>
                            <div class="tco-value" id="cost-per-year">-</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üìà –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                    <canvas id="expenses-chart"></canvas>
                </div>

                <div class="card">
                    <h2>üìã –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                    <div id="expenses-detail"></div>
                </div>

                <div class="card">
                    <h2>üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏</h2>
                    <div id="comparison"></div>
                </div>

                <button type="button" id="back-btn" class="btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –≤–≤–æ–¥—É</button>
            </div>
        </main>
    </div>
    <!-- –í index.html –¥–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="tco-calculator.js"></script>
    <script src="storage.js"></script>
    <script src="app.js"></script>
</body>
</html>
